{"version":3,"sources":["fbase.js","components/AuthForm.js","routes/Auth.js","components/Nweet.js","components/NweetFactory.js","routes/Home.js","components/Navigation.js","img/home_logo.png","img/user_logo.png","routes/Profile.js","components/AppRouter.js","components/App.js","index.js"],"names":["firebase","initializeApp","apiKey","process","authDomain","projectId","storageBucket","messagingSenderId","appId","firebaseInstance","authService","auth","dbService","firestore","storageService","storage","AuthForm","useState","email","setEmail","password","setPassword","newAccount","setNewAccount","error","setError","onChange","event","target","name","value","onSubmit","a","preventDefault","createUserWithEmailAndPassword","signInWithEmailAndPassword","message","className","type","placeholder","required","onClick","prev","Auth","onSocialClick","provider","GoogleAuthProvider","GithubAuthProvider","signInWithPopup","data","console","log","Nweet","nweetObj","isOwner","userObj","editing","setEditing","text","newNweet","setNewNweet","onDeleteClick","window","confirm","doc","id","delete","refFromURL","attachmentUrl","toggleEditing","update","displayName","src","icon","faTrash","faPencilAlt","NweetFactory","nweet","setNweet","attachment","setAttachment","fileRef","ref","child","uid","uuidv4","putString","response","getDownloadURL","createAt","Date","now","creatorId","collection","add","maxLength","faPlus","accept","theFile","files","reader","FileReader","readAsDataURL","onloadend","finishedEvent","currentTarget","result","style","opacity","backgroundImage","faTimes","Home","nweets","setNweets","useEffect","onSnapshot","snapshot","nweetArray","docs","map","Navigation","to","refreshUser","history","useHistory","newDisplayName","setNewDisplayName","getMyNweets","where","orderBy","get","updateProfile","autoFocus","marginTop","signOut","push","AppRouter","isLoggedIn","exact","path","Profile","App","init","setInit","setIsLoggedIn","setUserObj","onAuthStateChanged","user","args","currentUser","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.5b23517f.chunk.js","sourcesContent":["import firebase from 'firebase/app'\r\nimport \"firebase/auth\"\r\nimport \"firebase/firestore\"\r\nimport \"firebase/storage\"\r\n\r\nconst firebaseConfig = {\r\n    apiKey: process.env.REACT_APP_API_KEY,\r\n    authDomain: process.env.REACT_APP_AUTH_DOMAIN,\r\n    projectId: process.env.REACT_APP_PROJECT_ID, \r\n    storageBucket: process.env.REACT_APP_STORAGE_BUCKET, \r\n    messagingSenderId: process.env.REACT_APP_MESSAGIN_ID, \r\n    appId: process.env.REACT_APP_APP_ID\r\n  };\r\n\r\n  firebase.initializeApp(firebaseConfig);\r\n\r\n  export const firebaseInstance = firebase;\r\n\r\n  export const authService = firebase.auth(); //auth 서비스 부분만 export 함\r\n  export const dbService = firebase.firestore();\r\n  export const storageService = firebase.storage();","import React, { useState } from \"react\";\nimport { authService, firebaseInstance } from \"../fbase\";\nimport \"./components.css\";\n\nconst AuthForm = () => {\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [newAccount, setNewAccount] = useState(true);\n  const [error, setError] = useState(\"\");\n\n  const onChange = (event) => {\n    const {\n      target: { name, value },\n    } = event;\n\n    if (name === \"email\") {\n      setEmail(value);\n    } else if (name === \"password\") {\n      setPassword(value);\n    }\n  };\n\n  const onSubmit = async (event) => {\n    event.preventDefault();\n\n    try {\n      if (newAccount) {\n        await authService.createUserWithEmailAndPassword(email, password);\n      } else {\n        await authService.signInWithEmailAndPassword(email, password);\n      }\n    } catch (error) {\n      setError(error.message);\n    }\n  };\n\n  const toggleAccount = () => {\n    //setNewAccount(prev => !prev);\n    setNewAccount((prev) => {\n      return !prev;\n    });\n  };\n\n  return (\n    <>\n\n      <h1 className=\"authForm_title\">Don Twitter</h1>\n      <form onSubmit={onSubmit} className=\"AuthForm\">\n        <input onChange={onChange} name=\"email\" type=\"text\" placeholder=\"  Email\" required value={email} />\n        <input onChange={onChange} name=\"password\" type=\"password\" placeholder=\"  Password\" required value={password} />\n        <input className=\"btn btn-primary\" type=\"submit\" value={newAccount ? \"Create Account\" : \"Log In\"} />\n\n        {error}\n      </form>\n      <button className=\"btn btn-secondary\" onClick={toggleAccount}>\n        {newAccount ? \"Login\" : \"Create Account\"}\n      </button>\n    </>\n  );\n};\n\nexport default AuthForm;\n","import React, { useState } from \"react\";\r\nimport AuthForm from \"../components/AuthForm\";\r\nimport { authService, firebaseInstance } from \"../fbase\";\r\nimport \"./route.css\"\r\n\r\nconst Auth = () => {\r\n\r\n  const onSocialClick = async (event) => {\r\n    const { target: { name } } = event;\r\n\r\n    let provider;\r\n\r\n    if (name === \"google\") {\r\n\r\n      provider = new firebaseInstance.auth.GoogleAuthProvider();\r\n\r\n    } else if (name === \"github\") {\r\n      provider = new firebaseInstance.auth.GithubAuthProvider();\r\n    }\r\n\r\n    const data = await authService.signInWithPopup(provider);\r\n    console.log(data);\r\n\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <AuthForm/>\r\n      <div className=\"ThridSignIn\">\r\n        <button className=\"btn btn-outline-secondary\" name=\"google\" onClick={onSocialClick}>Continue with Google</button>\r\n        <button className=\"btn btn-outline-secondary\" name=\"github\" onClick={onSocialClick}>Continue with Github</button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Auth;\r\n","import React, { useState } from \"react\";\r\nimport { dbService, storageService } from \"../fbase\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { faTrash, faPencilAlt } from \"@fortawesome/free-solid-svg-icons\";\r\n\r\nfunction Nweet({ nweetObj, isOwner,userObj }) {\r\n  const [editing, setEditing] = useState(false);\r\n  const [newNweet, setNewNweet] = useState(nweetObj.text);\r\n\r\n  const onDeleteClick = async () => {\r\n    const ok = window.confirm(\"You really want to delete this tweet?\");\r\n\r\n    if (ok) {\r\n      await dbService.doc(`nweets/${nweetObj.id}`).delete(); //트윗을 삭제\r\n      await storageService.refFromURL(nweetObj.attachmentUrl).delete(); //이미지를 db 에서 삭제\r\n    }\r\n  };\r\n\r\n  const toggleEditing = () => {\r\n    setEditing((prev) => {\r\n      return !prev;\r\n    });\r\n  };\r\n\r\n  const onSubmit = async (event) => {\r\n    event.preventDefault();\r\n    await dbService.doc(`nweets/${nweetObj.id}`).update({\r\n      text: newNweet,\r\n    });\r\n    setEditing(false);\r\n  };\r\n\r\n  const onChange = (event) => {\r\n    setNewNweet(event.target.value);\r\n  };\r\n\r\n  return (\r\n    <div className=\"nweet\">\r\n      {editing ? (\r\n        <>\r\n          {isOwner && (\r\n            <>\r\n              <form onSubmit={onSubmit} className=\"container nweetEdit\">\r\n                <input type=\"text\" placeholder=\"Edit your nweet\" value={newNweet} required onChange={onChange} />\r\n                <input type=\"submit\" value=\"Update Nweet\" className=\"formBtn btn btn-primary\" />\r\n              </form>\r\n              <span onClick={toggleEditing} className=\"formBtn cancelBtn\">\r\n                Cancel\r\n              </span>\r\n            </>\r\n          )}\r\n        </>\r\n      ) : (\r\n        <>\r\n          <span className=\"Nweet_profile\">{userObj.displayName}</span>\r\n          <h4>{nweetObj.text}</h4>\r\n          {nweetObj.attachmentUrl && <img src={nweetObj.attachmentUrl} />}\r\n          {isOwner && (\r\n            <>\r\n              <div className=\"nweet__actions\">\r\n                <span onClick={onDeleteClick}>\r\n                  <FontAwesomeIcon icon={faTrash} />\r\n                </span>\r\n                <span onClick={toggleEditing}>\r\n                  <FontAwesomeIcon icon={faPencilAlt} />\r\n                </span>\r\n              </div>\r\n            </>\r\n          )}\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Nweet;\r\n","import React, { useState } from \"react\";\nimport { dbService, storageService } from \"../fbase\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faPlus, faTimes } from \"@fortawesome/free-solid-svg-icons\";\n\nfunction NweetFactory({ userObj }) {\n  const [nweet, setNweet] = useState(\"\");\n  const [attachment, setAttachment] = useState(\"\");\n\n  const onSubmit = async (event) => {\n    event.preventDefault();\n    let attachmentUrl = \"\";\n\n    if (attachment !== \"\") {\n      //파이어베이스 storage의 ref을 통해 연결함\n      const fileRef = storageService.ref().child(`${userObj.uid}/${uuidv4()}`); // 트윗을 db에 입력\n      const response = await fileRef.putString(attachment, \"data_url\"); // 이미지를 storage에 입력\n      attachmentUrl = await response.ref.getDownloadURL();\n    }\n    const nweetObj = {\n      text: nweet,\n      createAt: Date.now(),\n      creatorId: userObj.uid,\n      attachmentUrl,\n    };\n    await dbService.collection(\"nweets\").add(nweetObj);\n    setNweet(\"\");\n    setAttachment(\"\");\n  };\n\n  const onChange = (event) => {\n    setNweet(event.target.value);\n  };\n\n  const onFileChange = (event) => {\n    const theFile = event.target.files[0];\n\n    const reader = new FileReader();\n\n    reader.readAsDataURL(theFile);\n    reader.onloadend = (finishedEvent) => {\n      // 리더에 이벤트 리스너 onloadend를 추가\n      setAttachment(finishedEvent.currentTarget.result);\n    };\n  };\n\n  const onClearAttachment = () => {\n    setAttachment(null);\n  };\n\n  return (\n    <form onSubmit={onSubmit} className=\"factory_input_form\">\n      \n      <div className=\"factoryInput__container\">\n        <input\n          className=\"factoryInput__input\"\n          value={nweet}\n          onChange={onChange}\n          type=\"text\"\n          placeholder=\"What's on your mind?\"\n          maxLength={120}\n        />\n        <input type=\"submit\" value=\"&rarr;\" className=\"factoryInput__arrow\" />\n        \n      </div>\n\n      <label  className=\"factoryInput__label\">\n        <span>Add photos</span>\n        <FontAwesomeIcon icon={faPlus} />\n      </label>\n\n      <input\n        id=\"attach-file\"\n        type=\"file\"\n        accept=\"image/*\"\n        onChange={onFileChange}\n        style={{\n          opacity: 0,\n        }}\n      />\n\n      {attachment && (\n      <div className=\"factoryForm__attachment\">\n      <img\n        src={attachment}\n        style={{\n          backgroundImage: attachment\n        }}\n      />\n      <div className=\"factoryForm__clear\" onClick={onClearAttachment}>\n        <span>Remove</span>\n        <FontAwesomeIcon icon={faTimes} />\n      </div>\n    </div>\n  )}\n    </form>\n  );\n}\n\nexport default NweetFactory;\n","import React, { useEffect, useState } from \"react\";\r\nimport { dbService, storageService } from \"../fbase\";\r\nimport Nweet from \"../components/Nweet\";\r\n\r\nimport NweetFactory from \"../components/NweetFactory\";\r\nimport \"../routes/route.css\";\r\n\r\nfunction Home({ userObj }) {\r\n  const [nweets, setNweets] = useState([]);\r\n\r\n  useEffect(() => {\r\n    //onSnapShot은 CRUD 기능을 활성화 시키기 위한 리스너임\r\n    //이렇게 해야 실시간으로 입력 데이터가 뜸\r\n    dbService.collection(\"nweets\").onSnapshot((snapshot) => {\r\n      const nweetArray = snapshot.docs.map((doc) => {\r\n        return {\r\n          id: doc.id,\r\n          ...doc.data(),\r\n        };\r\n      });\r\n      setNweets(nweetArray);\r\n    });\r\n  }, []);\r\n\r\n  return (\r\n    <div>\r\n      <NweetFactory userObj={userObj} />\r\n      <div className=\"home_nweet\">\r\n        {nweets.map((nweet) => {\r\n          return <Nweet key={nweet.id} nweetObj={nweet} isOwner={nweet.creatorId === userObj.uid} userObj={userObj} />;\r\n        })}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Home;\r\n","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport \"./components.css\";\r\nimport home from \"../img/home_logo.png\";\r\nimport user from \"../img/user_logo.png\";\r\n\r\nconst Navigation = ({ userObj }) => {\r\n  return (\r\n    <>\r\n      <nav className=\"Navigation\">\r\n        <div>\r\n          <Link to=\"/\">\r\n            <img src={home} />\r\n            <div>Home</div>\r\n          </Link>\r\n        </div>\r\n        <div>\r\n          <Link className=\"setting\" to=\"/profile\">\r\n            <img src={user} />\r\n            <div>Setting</div>\r\n          </Link>\r\n        \r\n        </div>\r\n      </nav>\r\n      <h2>Hello, {userObj.displayName}</h2>\r\n\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Navigation;\r\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAA7EAAAOxAGVKw4bAAABMElEQVRo3u3YMQ6CMBTG8RYNkzthIiSOXsi74ITn8TSMJMbJeAUixc1UbCktr31F3zeSaP6/kNCkjNF+eGXe12Xe19gdzvFFJoYiE4NPBPcVLwSv5GdJMpyv981J95siE4Pq+e2RTDYmIeIZY0wIXvl4E6AAXbxPBBjAFO8LAQKYGz+F4JxdUAC28TrEbvc8uiAWAVzjVYimTTsXhDNgaTwUwgkAFQ+BsAZAxy9FWJ3EvuLlySf2Yd+lTZt2IIAQ8SqEabMAIeNtEUYARrwNYhKAGT8XoQXEED8HoQTEFG9CfAFijJ9CfABijtch3oA1xKsQfG3xYwRfY7yM0H5GdbcEWNPdToDfSoQeAbBHAOwRAHtbqD8y3SKPB3XOrP4NEAB7BMAeAbBHAOwRgPbvewEc8eLogbyItQAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAA7EAAAOxAGVKw4bAAADlUlEQVRo3tWaT2hUVxjFz/e9efPGjAYNoUJiSZ2osQntopW0Fas1Cm78h25KQQR3XZRCV25chFAouCylmxbbhhYpWGzpTolii//QIDJGkwxjTNOAUv9gm2HezLv36yJpaEFt7r3vzTNnPefc87tv5s697z1CTNrwykzmwf1cn9a0B0AvgIIIWgCACA8AlAFcZpYfW1qqQ1eK+SiOcck1YMeW+zw+vvxdrWlABIUFDUooM8uR7p6Hx38+1apTA+jqqDeHoTcogt1WgxNOBoE6OHrHf9xwgLnyp0TQ6zIJRLgc5NS20Qn/Lxs/25g+fL/IYegdcy0PACLoDavel9YTYGMqtKl9StEJ1/L/lufJnvK095Opz/gKbH/7IWtNA3GWBwCtqf/wR9eM+xhfgc52tSmK6Je4AQDA9/XrpanMsInHmFgp2pVE+dls3mnqsfkRv5kUgAjeaATAmqQAbLJtAFoTBDDOtgHIJtVeBJnEAQSoJgVAZJ5ts+7+kRQAgHuJAwCYSBDAONsGoJgggHG2+VeI5FJS7ZnNs40BfF+fTai/DgL1a+IAY5P+BBFuxd2eCFdu3s4aLxBW5wEi/JAAgNX23ArAy+hv4wbI+Pp4wwBKv2VGiHAxrvJEOD0+mZlsGAAAMMtncQEwy+fWXlvj0qX17wFMObcnlFesCI2Pks4A18dyNWY56tqfSY5evdFkfZPLGgAAlixRXwCYdoiYyuejr5wmwMU8Us5WmKXfenCWj4ulwGl36wQAAPl89A2ARxbWx3NeJzkDFEtBlQjnTX1EuFgsBZXUAeZUs/DEcnfaGWD9S/VmEWw29YlgU1dHfXmqAD2dYa5a9Y4Bs88BDNUcht5gd6GWSwWgs11tnpnxL4hgn22GCHZWKplLne2q75OBc3YbS5MPd3XUV9VqvFeEDopgg/28PaEIYZhIvvaz+uTYHX/B+6JnAry8uvZCGHobtaYtAPpE8GqcpZ8BUwQwxCxngkCdv3k7+9TD/n8A3nrtT757t2m7VrQfwDsiWNeIwgsAGgNwlj05sXJl5fSF4WXzj6XmAQptqk9r+lQE3WkX/h+YEfbkg/Lv3tA8QKFNvacUDSK+/4WkpT1PDpSnve9o7YvRqlqNRwE0pd3KUJVsVndxFPGhRVgeAJqiiA+xCLam3cRWItjKwPOx0lhqHf/zOsAiVQsTwWkvkrJyLJJ2B3uJLJ51/6licn5fJT0RAX8DazIpqTJ8r7wAAAAASUVORK5CYII=\"","import React, { useEffect, useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\n//import Nweet from \"../components/Nweet\";\r\nimport { authService, dbService } from \"../fbase\";\r\n\r\nexport default ({ userObj, refreshUser }) => {\r\n  const history = useHistory();\r\n\r\n  const [newDisplayName, setNewDisplayName] = useState(userObj.displayName);\r\n\r\n  const onLogOutClick = () => {\r\n    authService.signOut();\r\n    history.push(\"/\");\r\n  };\r\n\r\n  const getMyNweets = async () => {\r\n    //where do the filtering\r\n    const nweets = await dbService.collection(\"nweets\").where(\"creatorId\", \"==\", userObj.uid).orderBy(\"createdAt\", \"asec\").get();\r\n    //console.log(nweets.docs.map(doc=>doc.data()));\r\n  };\r\n\r\n  useEffect(() => {\r\n    getMyNweets();\r\n  }, []);\r\n\r\n  const onSubmit = async (event) => {\r\n    event.preventDefault();\r\n\r\n    if (userObj.displayName !== newDisplayName) {\r\n      //When user change the name => update the name\r\n\r\n      await userObj.updateProfile({\r\n        displayName: newDisplayName,\r\n      });\r\n      refreshUser(); //App에 있는 userObj 스테이트를 refreash 해줘야 새로 입력된 데이터가 화면에 보여진다\r\n    }\r\n    setNewDisplayName(\"\");\r\n  };\r\n\r\n  const onChange = (event) => {\r\n    setNewDisplayName(event.target.value);\r\n  };\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      <form onSubmit={onSubmit} className=\"profileForm\">\r\n        <input onChange={onChange} type=\"text\" autoFocus placeholder=\"Display name\" value={newDisplayName} className=\"formInput\" />\r\n        <input\r\n          type=\"submit\"\r\n          value=\"Update Profile\"\r\n          className=\"formBtn\"\r\n          style={{\r\n            marginTop: 10,\r\n          }}\r\n        />\r\n      </form>\r\n      <span className=\"formBtn cancelBtn logOut\" onClick={onLogOutClick}>\r\n        Log Out\r\n      </span>\r\n    </div>\r\n  );\r\n};\r\n","import React, { useState } from \"react\";\r\nimport { HashRouter as Router, Redirect, Route, Switch } from \"react-router-dom\";\r\nimport Auth from \"../routes/Auth\";\r\nimport Home from \"../routes/Home\";\r\nimport Navigation from \"../components/Navigation\"\r\nimport Profile from \"../routes/Profile\";\r\n\r\n\r\nconst AppRouter = ({ isLoggedIn, userObj,refreshUser }) => {\r\n\r\n  return (\r\n    <Router>\r\n      {isLoggedIn && <Navigation userObj={userObj} />}\r\n      <Switch>\r\n        {isLoggedIn ? (\r\n          <>\r\n            <Route exact path=\"/\">\r\n              <Home userObj={userObj} />\r\n            </Route>\r\n            <Route exact path=\"/profile\">\r\n              <Profile userObj={userObj} refreshUser={refreshUser} />\r\n            </Route>\r\n            {/* <Redirect from=\"*\" to=\"/\"/> */}\r\n          </>\r\n        ) : (\r\n          <>\r\n          <Route exact path=\"/\">\r\n            <Auth />\r\n          </Route>\r\n          {/* <Redirect from=\"*\" to=\"/\"/> */}\r\n          </>\r\n        )}\r\n      </Switch>\r\n    </Router>\r\n  );\r\n};\r\n\r\nexport default AppRouter;\r\n","import React,{useState,useEffect} from \"react\"\nimport AppRouter from \"./AppRouter\"\nimport {authService} from \"../fbase\";\n\n\nfunction App() {\n\n  const [init, setInit] = useState(false);\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\n  const [userObj,setUserObj] = useState(null);\n\n  useEffect(()=>{\n    authService.onAuthStateChanged((user)=>{\n      if(user){\n        //setUserObj(user); 객체가 너무 커서 유저 프로필을 업데이트 할려고 할때 리액트가 못 알아먹음\n        setUserObj({\n          displayName:user.displayName,\n          uid:user.uid,\n          updateProfile: (args) => user.updateProfile(args)\n        })\n        setIsLoggedIn(true)\n      }else{\n        setIsLoggedIn(false)\n        setUserObj(null)\n      }\n      setInit(true)\n    })\n  },[])\n \n  const refreshUser = ()=>{\n    //유저가 프로필 이름을 바뀌었을때 돔을 refresh해주기 위한 함수 \n    //setUserObj(authService.currentUser) userObj는 매우 큰 객체로 이를 전부 리프레쉬 한다면 리액트는 그많은 것들중 \n    //무엇이 바뀌었는지 감지하기가 힘들다. 그러므로 업데이트된 객체를 축소해서 리프레시 해야된다\n\n    const user = authService.currentUser;\n    setUserObj({\n      displayName: user.displayName,\n      uid:user.uid,\n      updateProfile:(args) => user.updateProfile(args)\n    })\n\n  }\n\n  return (\n    <>\n      {init ? <AppRouter refreshUser={refreshUser} isLoggedIn={isLoggedIn} userObj={userObj} /> : \"Initializing...\" }\n  \n \n   \n    </>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './components/App'\n\n\n\nReactDOM.render(\n  <React.StrictMode>\n   <App/>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n\n"],"sourceRoot":""}